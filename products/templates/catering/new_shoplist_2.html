{% extends "base/base_nav_footer.html" %} {% load static %} {% block link %}
<link rel="stylesheet" type="text/css" href="{% static 'css/kitchen/shoplist.css' %}"> 
{% endblock link %} {% block content %}

<!--Container of List-->
<div class="container-fluid"> 
    <div class="row">        
        <div class="col-6 col-md-4">
            <div class="tab_list list-group" id="list-tab" role="tablist">
                {% for sp in supplies %} 
                    {% if sp == supplies|first %}
                    <a class="list-group-item list-group-item-action active" id="list-{{sp.pk}}-list" data-toggle="list" href="#{{sp.pk}}-home" role="tab" aria-controls="{{sp.pk}}">
                    {% else %}
                    <a class="list-group-item list-group-item-action" id="list-{{sp.pk}}-list" data-toggle="list" href="#{{sp.pk}}-home" role="tab" aria-controls="{{sp.pk}}">
                    {% endif %} 
                    {{sp.name}}
                    </a>
                {% endfor %}
            </div>
        </div>
        <div class="col-6 col-md-4">
            <div class="tab-content" id="nav-tabContent">
                {% for sp in supplies %} 
                    {% if sp == supplies|first %}
                    <div class="tab-pane fade show active" id="{{sp.pk}}-home" role="tabpanel" aria-labelledby="list-{{sp.pk}}-list">
                    {% else %}
                    <div class="tab-pane fade" id="{{sp.pk}}-home" role="tabpanel" aria-labelledby="list-{{sp.pk}}-list">
                    {% endif %}
                        <div class="row">
                            <div class="sect_img">
                                <p class="text-center">{{sp.name}}</p>
                                <img src="{{sp.image.url}}" alt="No img">
                            </div>
                        </div>                       
                        <div class="row">
                            <div class="col-12 sect_btn">
                            {% for presentation in presentations %} 
                                {% if presentation.supply == sp %}                                
                                    <button class="btn-pres btn btn-danger col-12" id="{{presentation.getElements}}">
                                        {{presentation.getDescription}}
                                    </button>
                                    <br><br>   
                                {% endif %} 
                            {% endfor %}
                            </div>
                        </div>
                    </div>                                               
                 {% endfor %}
            </div>
        </div>                
        <div class="col-md-4">
            <div class="tab_view col-md-12">
                <table class="table table-striped table-dark" id="TableID">
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Cantidad</th>
                            <th>Presentacion</th>
                            <th>Costo</th>
                        </tr>
                    </thead>
                    <tbody>
                
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!--FloatingButton-->
<div class="popout">
    <div class="FAB" id="fab-save-shoplist">
        <i class="material-icons">save</i>
    </div>
</div>


{% endblock content %} 
{% block javascript %}
<script type="text/javascript" charset="utf-8">

    var js_list = "{{presentations}}";

    table_array = [];

    $('.btn-pres').click(function () {
        var a = $(this).attr('id');
        var arr = a.split("&");                
        table_array.push(arr);
        console.log(table_array);
        alert(table_array);
        pop_table();
    });

    function pop_table(){
        for (var x=0;x<table_array.length;x++){
            var html_list =
                '<tr>' +
                '<th>' + table_array[x][0] + '</th>' +
                '<th>' + table_array[x][1] + '</th>' +
                '<th>' + table_array[x][2] + '</th>' +
                '<th>' + table_array[x][3] + '</th>' +
                '</tr>'

            $("#TableID tbody")
                .append($(
                    html_list
                ));

        }

        table_array
    }


</script>
{% endblock javascript %}